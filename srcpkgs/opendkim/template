# Template file for 'opendkim'
pkgname=opendkim
_commit=266fcb90d331f7fc1b20a79fd443e46c316652ea
version=20201208
revision=1
wrksrc="OpenDKIM-${_commit}"
build_style=gnu-configure
configure_args="--with-milter=${XBPS_CROSS_BASE}/usr"
hostmakedepends="pkg-config automake libtool"
makedepends="libbsd-devel libressl-devel libmilter-devel"
short_desc="DKIM library"
maintainer="John Regan <john@jrjrtech.com>"
license="BSD-3-Clause, Sendmail"
homepage="https://github.com/trusteddomainproject/OpenDKIM"
distfiles="${homepage}/archive/${_commit}.zip"
checksum=112082a2637db1309caee36cad0bdd123626acbb8c64875ff53cde6800f64b7e
python_version=3 #unverified

pre_configure() {
	autoreconf -fi
}

post_install() {
	vlicense LICENSE
	vlicense LICENSE.Sendmail
	vsv opendkim
}

opendkim-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/*.a
		vmove usr/lib/*.so
		vmove usr/lib/pkgconfig
	}
}
